# secrets

This submodule will:

- create a random password, the result is treated as sensitive.
- create google secret manager and secret version to store the secret data.

*Warning* The secret data will be stored in the raw state as plain-text and the secret can be displayed in console output.

## Usage

Basic usage of this submodule is as follows:

```hcl
module "admin_password" {
  source = "gehoumi/ciscoasav-vm/google//modules/secrets"

  project_id = var.project_id
  secret_id = "asav-admin-password"

}

```

Once the secret is created, you can search for the newly created secret with something
similar to the following:

```
$ gcloud secrets versions access "latest" --secret="asav-admin-password" --project="<project-id>"

```

## Enable APIs

A project with the following API enabled must be used to host the resources of this module:

- Secret Manager API: `secretmanager.googleapis.com`

<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

No requirements.

## Providers

| Name | Version |
|------|---------|
| <a name="provider_google"></a> [google](#provider\_google) | n/a |
| <a name="provider_random"></a> [random](#provider\_random) | n/a |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [google_secret_manager_secret.secret_basic](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/secret_manager_secret) | resource |
| [google_secret_manager_secret_version.secret_version_basic](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/secret_manager_secret_version) | resource |
| [random_password.password](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/password) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_create_secret"></a> [create\_secret](#input\_create\_secret) | If the secret should be created | `bool` | `true` | no |
| <a name="input_label"></a> [label](#input\_label) | label of the secret | `string` | `"created_by_terraform"` | no |
| <a name="input_project_id"></a> [project\_id](#input\_project\_id) | The ID of the Project to which the resources belong | `string` | n/a | yes |
| <a name="input_replicas_location_1"></a> [replicas\_location\_1](#input\_replicas\_location\_1) | The canonical IDs of the location to replicate data | `string` | `"us-central1"` | no |
| <a name="input_replicas_location_2"></a> [replicas\_location\_2](#input\_replicas\_location\_2) | The canonical IDs of the location to replicate data | `string` | `"us-east1"` | no |
| <a name="input_secret_id"></a> [secret\_id](#input\_secret\_id) | The secret ID, must be unique within the project. | `any` | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_secret_data"></a> [secret\_data](#output\_secret\_data) | The password generated by random password and stored in secret data of GCP secret manager |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
